# Quick Start Guide - 5 PhÃºt Äá»ƒ Cháº¡y Lab

## ğŸ¯ Má»¥c TiÃªu
Tá»« 0 Ä‘áº¿n má»™t Integrated Malware Analysis Lab cháº¡y Ä‘Æ°á»£c chá»‰ trong **5 phÃºt**.

---

## ğŸ“‹ YÃªu Cáº§u TrÆ°á»›c TiÃªn

âœ… Kiá»ƒm tra:
- [ ] Docker Ä‘Æ°á»£c cÃ i Ä‘áº·t (`docker --version`)
- [ ] Docker Compose Ä‘Æ°á»£c cÃ i Ä‘áº·t (`docker-compose --version`)
- [ ] CÃ³ quyá»n sudo (`sudo whoami`)
- [ ] Ãt nháº¥t 10GB khÃ´ng gian á»• Ä‘Ä©a (`df -h`)
- [ ] Ãt nháº¥t 4 CPU cores, 8GB RAM (`nproc`, `free -h`)

---

## âš¡ Quick Start (CÃ¡ch 1: Automated - Khuyáº¿n Nghá»‹)

### BÆ°á»›c 1: Chuáº©n Bá»‹ (30 giÃ¢y)

```bash
cd /path/to/integrated-malware-lab
chmod +x quickstart.sh scripts/*.sh
```

### BÆ°á»›c 2: Cháº¡y Quickstart (3-5 phÃºt)

```bash
bash quickstart.sh
```

Script nÃ y sáº½ tá»± Ä‘á»™ng:
1. âœ… Kiá»ƒm tra yÃªu cáº§u há»‡ thá»‘ng
2. âœ… Táº¡o thÆ° má»¥c logs
3. âœ… Build Docker images
4. âœ… Khá»Ÿi cháº¡y containers
5. âœ… Cáº¥u hÃ¬nh host routing
6. âœ… Cháº¡y connectivity test

**Káº¿t thÃºc khi tháº¥y:**
```
âœ“ Integrated Malware Analysis Lab is READY!
```

---

## âš¡ Quick Start (CÃ¡ch 2: Using Makefile - TÆ°Æ¡ng TÃ¡c)

### BÆ°á»›c 1: Build & Start (2-3 phÃºt)

```bash
make quickstart
```

Hoáº·c tá»«ng bÆ°á»›c:
```bash
make build      # Build images
make up         # Start containers
make setup      # Configure routing
```

### BÆ°á»›c 2: XÃ¡c Minh (30 giÃ¢y)

```bash
make status     # Check container status
make test       # Run connectivity tests
```

**Káº¿t thÃºc khi:**
- âœ… `docker-compose ps` hiá»ƒn thá»‹ 2 containers "Up"
- âœ… `make test` táº¥t cáº£ pass

---

## âš¡ Quick Start (CÃ¡ch 3: Manual Step-by-Step)

### BÆ°á»›c 1: Build Images (2-3 phÃºt)

```bash
docker-compose build --no-cache
```

### BÆ°á»›c 2: Start Services (30 giÃ¢y)

```bash
docker-compose up -d
sleep 3
docker-compose ps  # Verify
```

### BÆ°á»›c 3: Configure Host Routing (1 phÃºt)

```bash
sudo bash scripts/setup-routing.sh
```

### BÆ°á»›c 4: Test (1 phÃºt)

```bash
# Test DNS
nslookup example.com

# Test HTTP
curl http://localhost/

# Run full test
bash scripts/test-connectivity.sh
```

---

## ğŸ® Sau Khi Lab Cháº¡y

### Test Service #1: DNS

```bash
# Should resolve to INetSim
nslookup google.com

# View DNS logs
tail -20 shared/logs/inetsim/inetsim.log | grep DNS
```

### Test Service #2: HTTP

```bash
# Should get response from FakeNet-NG
curl http://example.com/

# View HTTP logs
tail -20 shared/logs/fakenet-ng/traffic.log
```

### Test Service #3: HTTPS

```bash
# Should get HTTPS response
curl -k https://example.com/

# View PCAP traffic
tcpdump -r shared/logs/fakenet-ng/traffic.pcap -n | head -10
```

### Monitor Real-Time Activity

```bash
# View live logs (Ctrl+C to exit)
docker-compose logs -f

# Watch resource usage
docker stats
```

---

## ğŸ“Š Expected Output

Náº¿u má»i thá»© hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng, báº¡n sáº½ tháº¥y:

```bash
$ docker-compose ps

NAME                COMMAND              STATUS
inetsim-server      /entrypoint.sh       Up 2 minutes (healthy)
fakenet-ng-server   /entrypoint.sh       Up 2 minutes (healthy)

$ nslookup example.com
;; Query time: 2 msec
Address: 127.0.0.1#53
example.com         name = 172.20.0.2      <-- INetSim IP

$ curl http://localhost/
<html><h1>FakeNet-NG Web Server</h1>...  <-- FakeNet-NG response

$ tail shared/logs/inetsim/inetsim.log
[2026-02-12 10:30:45] DNS Query: example.com A â†’ 172.20.0.2
[2026-02-12 10:30:46] HTTP Request: GET / from malware

$ tail shared/logs/fakenet-ng/traffic.log
[2026-02-12 10:30:47] GET /api/check HTTP/1.1
Response: 200 OK, Content-Type: application/json
```

---

## âŒ Kháº¯c Phá»¥c Nhanh Náº¿u CÃ³ Váº¥n Äá»

### Problem: Port Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng

```bash
# TÃ¬m process chiáº¿m port
sudo lsof -i :53

# Dá»«ng dá»‹ch vá»¥ xung Ä‘á»™t
sudo systemctl stop systemd-resolved  # Náº¿u Linux
```

### Problem: Containers khÃ´ng khá»Ÿi Ä‘á»™ng

```bash
# Xem logs chi tiáº¿t
docker-compose logs

# Kiá»ƒm tra disk space
df -h /var/lib/docker

# XÃ³a old images
docker system prune -a
```

### Problem: DNS khÃ´ng respond

```bash
# Kiá»ƒm tra container cháº¡y chÆ°a
docker-compose ps

# Kiá»ƒm tra logs
docker-compose logs inetsim | tail -30

# Restart container
docker-compose restart inetsim
```

### Problem: Routing khÃ´ng hoáº¡t Ä‘á»™ng

```bash
# Kiá»ƒm tra rules
sudo iptables -t nat -L OUTPUT -n | grep 53

# Reapply routing
sudo bash scripts/setup-routing.sh
```

---

## ğŸ” Verification Checklist

ÄÃ¡nh dáº¥u khi hoÃ n thÃ nh:

```
â–¡ Docker Compose khá»Ÿi cháº¡y 2 containers
  docker-compose ps

â–¡ INetSim DNS responding (port 53)
  nslookup example.com
  # Expected: Address: 127.0.0.1#53

â–¡ FakeNet-NG HTTP responding (port 80)
  curl http://localhost/
  # Expected: <html>FakeNet-NG Web Server</html>

â–¡ Logs Ä‘Æ°á»£c táº¡o
  ls -la shared/logs/
  # NÃªn cÃ³: inetsim/ vÃ  fakenet-ng/

â–¡ Routing configured (Linux only)
  sudo iptables -t nat -L OUTPUT -n | grep DNAT
  # NÃªn tháº¥y: 5-6 DNAT rules

â–¡ Connectivity tests pass
  bash scripts/test-connectivity.sh
  # NÃªn tháº¥y: âœ“ markers
```

---

## ğŸ“ Tiáº¿p Theo LÃ  GÃ¬?

### TÃ¹y Chá»n 1: TÃ¬m Hiá»ƒu Chi Tiáº¿t
```bash
# Äá»c documentation
cat docs/SETUP_GUIDE.md      # 50+ pages
cat docs/ARCHITECTURE.md     # System design
cat docs/TROUBLESHOOTING.md  # Problem solutions
```

### TÃ¹y Chá»n 2: Cháº¡y Malware Sample
```bash
# Copy sample
docker cp malware.exe inetsim-server:/tmp/

# Cháº¡y trong container
docker exec inetsim-server bash -c "cd /tmp && ./malware.exe"

# Xem láº¡i logs
tail -100 shared/logs/inetsim/inetsim.log
```

### TÃ¹y Chá»n 3: PhÃ¢n TÃ­ch Network Traffic
```bash
# Xem HTTP requests
grep "GET\|POST" shared/logs/fakenet-ng/traffic.log

# PhÃ¢n tÃ­ch PCAP
tcpdump -r shared/logs/fakenet-ng/traffic.pcap -A | less

# Export cho Wireshark
cp shared/logs/fakenet-ng/traffic.pcap ~/traffic.pcap
```

### TÃ¹y Chá»n 4: Theo DÃµi Thá»i Gian Thá»±c
```bash
# Terminal 1: View logs
docker-compose logs -f

# Terminal 2: Monitor resources
docker stats

# Terminal 3: Run malware
docker exec analyzer /path/to/malware.exe
```

---

## ğŸ›‘ Dá»«ng Lab

```bash
# Stop services
docker-compose stop

# Remove containers
docker-compose down

# Remove all data + routing (Complete cleanup)
docker-compose down -v
sudo bash scripts/cleanup-routing.sh
```

---

## ğŸ¯ Useful One-Liners

```bash
# Start everything at once
make quickstart

# Watch all logs live
docker-compose logs -f

# Check container health
docker inspect inetsim-server | grep -A 5 "Health"
docker inspect fakenet-ng-server | grep -A 5 "Health"

# Restart if needed
docker-compose restart

# Full cleanup
make purge

# See all available make commands
make help
```

---

## ğŸ’¡ Pro Tips

1. **Always check logs first**
   ```bash
   docker-compose logs --tail=50
   ```

2. **Use Makefile instead of manual commands**
   ```bash
   make help  # See all available commands
   ```

3. **Monitor in separate terminals**
   ```bash
   # Terminal 1
   docker-compose logs -f
   
   # Terminal 2
   docker stats
   
   # Terminal 3
   # Run your tests here
   ```

4. **Backup logs before cleanup**
   ```bash
   make backup-logs
   ```

5. **Keep documentation handy**
   ```bash
   less docs/TROUBLESHOOTING.md
   ```

---

## â“ FAQ

**Q: Máº¥t bao lÃ¢u Ä‘á»ƒ setup?**  
A: 3-5 phÃºt cho automated quickstart

**Q: Cáº§n bao nhiÃªu resource?**  
A: 4 cores CPU, 8GB RAM, 10GB disk

**Q: CÃ³ thá»ƒ cháº¡y trÃªn Windows khÃ´ng?**  
A: CÃ³ qua Docker Desktop, nhÆ°ng routing scripts lÃ  cho Linux

**Q: Ports máº·c Ä‘á»‹nh lÃ  gÃ¬?**  
A: DNS (53), SMTP (25), FTP (21), HTTP (80), HTTPS (443)

**Q: Logs lÆ°u á»Ÿ Ä‘Ã¢u?**  
A: `shared/logs/inetsim/` vÃ  `shared/logs/fakenet-ng/`

**Q: CÃ³ thá»ƒ customize services khÃ´ng?**  
A: CÃ³, edit `inetsim.conf` vÃ  `fakenet.conf`

---

## ğŸ“ Support

1. **Xem logs**
   ```bash
   docker-compose logs
   ```

2. **Cháº¡y diagnostic**
   ```bash
   bash scripts/test-connectivity.sh
   ```

3. **Kiá»ƒm tra troubleshooting guide**
   ```bash
   cat docs/TROUBLESHOOTING.md
   ```

4. **Reset vÃ  thá»­ láº¡i**
   ```bash
   make cleanup && make quickstart
   ```

---

**ChÃºc má»«ng! ğŸ‰ Lab cá»§a báº¡n sáºµn sÃ ng sá»­ dá»¥ng.**

Tiáº¿p theo: TÃ¬m hiá»ƒu thÃªm á»Ÿ [SETUP_GUIDE.md](docs/SETUP_GUIDE.md)
